<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins&display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='movimentacoes.css') }}">
    <title>Movimentações</title>
</head>

<body>

    <!-- NAVBAR PADRÃO -->
    <header class="header">
        <nav class="navbar">
            <li><a href="{{ url_for('main.paginaprincipal') }}" class="navbarLink">Página principal</a></li>
            <li><a href="{{ url_for('cat.categorias') }}" class="navbarLink">Categorias</a></li>
            <li><a href="{{ url_for('pro.produtos') }}" class="navbarLink">Produtos</a></li>
            <li><a href="{{ url_for('forn.fornecedores') }}" class="navbarLink">Fornecedores</a></li>
            <li><a href="{{ url_for('lote.lotes') }}" class="navbarLink">Lotes</a></li>
            <li><a href="{{ url_for('mov.movimentacoes') }}" class="navbarLink">Movimentações</a></li>
        </nav>
    </header>

    <!-- GRID PRINCIPAL -->
    <div class="containerGeneral">

        <!-- CADASTRAR MOV -->
        <form action="/cadastrar-movimentacao" method="POST" class="containerAdd cardForm">
            <h1 class="titleAdd">Cadastrar Movimentação</h1>

            <div class="formGroup">
                <label class="formLabel">ID Lote</label>
                <input type="number" name="idlote" class="formInput" placeholder="Insira o ID do lote" required>
            </div>

            <div class="formGroup">
                <label class="formLabel">ID Usuário</label>
                <input type="number" name="idusuario" class="formInput" placeholder="Insira o ID do usuário" required>
            </div>

            <div class="formGroup">
                <label class="formLabel">Data</label>
                <input type="date" name="data" class="formInput" required>
            </div>

            <div class="formGroup">
                <label class="formLabel">Tipo</label>
                <select name="tipo" class="formInput" required>
                    <option value="">Selecione</option>
                    <option value="ENTRADA">Entrada</option>
                    <option value="SAIDA">Saída</option>
                </select>
            </div>

            <div class="formGroup">
                <label class="formLabel">Quantidade</label>
                <input type="number" name="quantidade" class="formInput" placeholder="Quantidade" required>
            </div>

            <div class="formGroup">
                <label class="formLabel">Valor Unitário</label>
                <input type="number" step="0.01" name="valor" class="formInput" placeholder="Ex: 9.99" required>
            </div>

            <div class="formGroup">
                <label class="formLabel">Motivo</label>
                <input type="text" name="motivo" maxlength="50" class="formInput" placeholder="Motivo" required>
            </div>

            <button type="submit" class="btn btnPrimary">Confirmar</button>
        </form>

        <!-- BUSCAS -->
        <div class="containerSearch">

            <!-- BUSCAR POR ID -->
            <form action="/pesquisar-movimentacao-id" method="POST" class="containerSearchId cardForm">
                <h1 class="titleAdd">Buscar Movimentação</h1>

                <div class="formGroup">
                    <label class="formLabel">ID Movimentação</label>
                    <input type="number" name="id" class="formInput" placeholder="Buscar por ID">
                </div>

                <button type="submit" class="btn btnPrimary">Confirmar</button>
            </form>

            <!-- BUSCAR POR LOTE -->
            <form action="/pesquisar-movimentacao-lote" method="POST" class="containerSearchName cardForm">
                <div class="formGroup">
                    <label class="formLabel">ID Lote</label>
                    <input type="number" name="idlote" class="formInput" placeholder="Buscar por ID do lote">
                </div>
                <button type="submit" class="btn btnPrimary">Confirmar</button>
            </form>

            <!-- BUSCAR POR USUARIO -->
            <form action="/pesquisar-movimentacao-usuario" method="POST" class="containerSearchName cardForm">
                <div class="formGroup">
                    <label class="formLabel">ID Usuário</label>
                    <input type="number" name="idusuario" class="formInput" placeholder="Buscar por ID do usuário">
                </div>
                <button type="submit" class="btn btnPrimary">Confirmar</button>
            </form>

            <!-- BUSCAR POR TIPO -->
            <form action="/pesquisar-movimentacao-tipo" method="POST" class="containerSearchName cardForm">
                <div class="formGroup">
                    <label class="formLabel">Tipo</label>
                    <select name="tipo" class="formInput">
                        <option value="">Selecione</option>
                        <option value="ENTRADA">Entrada</option>
                        <option value="SAIDA">Saída</option>
                    </select>
                </div>
                <button type="submit" class="btn btnPrimary">Confirmar</button>
            </form>

        </div>
    </div>

    <a href="{{ url_for('mov.movimentacoes') }}" class="showAllLink">Exibir todas movimentações</a>

    <!-- TABELA -->
    <table class="tableCategories">
        <tr class="tableRowTop">
            <th class="tableTopID">ID</th>
            <th class="tableTopLote">ID LOTE</th>
            <th class="tableTopUser">ID USUÁRIO</th>
            <th class="tableTopDate">DATA</th>
            <th class="tableTopType">TIPO</th>
            <th class="tableTopQuant">QUANTIDADE</th>
            <th class="tableTopValor">VALOR UNITÁRIO</th>
            <th class="tableTopReason">MOTIVO</th>
            <th class="tableTopAction">AÇÃO</th>
        </tr>

        {% for mov in movimentacoes %}
        <tr class="tableRow">
            <td class="tableCell">{{ mov.IDMOVIMENTACAO }}</td>
            <td class="tableCell">{{ mov.IDLOTE }}</td>
            <td class="tableCell">{{ mov.IDUSUARIO }}</td>
            <td class="tableCell">{{ mov.DATA_MOVIMENTOCAO }}</td>
            <td class="tableCell">{{ mov.TIPO }}</td>
            <td class="tableCell">{{ mov.QUANTIDADE }}</td>
            <td class="tableCell">{{ mov.VALOR_UNITARIO }}</td>
            <td class="tableCell">{{ mov.MOTIVO }}</td>

            <td class="tableCell tableActionCell">

                <form action="{{ url_for('mov.deletarmovimentacao', id=mov.IDMOVIMENTACAO) }}" method="GET">
                    <button type="submit" class="btn btnDelete"
                        onclick="return confirm('Deseja deletar esta movimentação?')">DELETAR</button>
                </form>

                <form action="{{ url_for('mov.alterarmovimentacao', id=mov.IDMOVIMENTACAO) }}" method="GET">
                    <button type="submit" class="btn btnPrimary">ALTERAR</button>
                </form>

            </td>
        </tr>
        {% endfor %}
    </table>

</body>
</html>
